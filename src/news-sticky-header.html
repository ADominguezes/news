<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout.html">

<dom-module id="news-sticky-header">

  <template>

    <style>

      :host {
        @apply(--layout-horizontal);
        @apply(--layout-center);
        position: fixed;
        top: -1px;
        left: 0;
        right: 0;
        color: #fff;
        background-color: black;
        padding: 1px 16px 0 16px;
        height: 64px;
        visibility: hidden;
        pointer-events: none;
        transition: transform 0.3s ease-in-out, visibility 0.3s ease-in-out;
        transform: translate3d(0, -100%, 0);
      }

      :host([shown]) {
        visibility: visible;
        pointer-events: auto;
        transform: translate3d(0, 0, 0);
      }

    </style>

    <content></content>

  </template>

  <script>
    Polymer({
      is: 'news-sticky-header',

      properties: {
        shown: {
          type: Boolean,
          reflectToAttribute: true
        }
      },

      get threshold() {
        return this.smallScreen ? window.innerHeight - 32 : 200;
      },

      attached: function() {
        this._scrollHandler = this._scrollHandler.bind(this);
        window.addEventListener('scroll', this._scrollHandler);
      },

      detached: function() {
        window.removeEventListener('scroll', this._scrollHandler);
      },

      _scrollHandler: function() {
        var scrollTop = window.pageYOffset;
        this.shown = (scrollTop >= this.threshold);
      }


    });
  </script>
</dom-module>
